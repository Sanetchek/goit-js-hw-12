{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst PIXABAY_KEY = '43879059-f5905d2b1638a117e79b8083f';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 15;\n\nexport const getPixabayImages = async (query = '', page = 1) => {\n  const params = {\n    key: PIXABAY_KEY,\n    q: query,\n    per_page: PER_PAGE,\n    page,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response?.statusText || 'Error fetching data');\n  }\n}","export const generateImagesList = (imagesList) => {\n  return imagesList\n    .map((image) => {\n      const { webformatURL, largeImageURL, comments, downloads, likes, views, tags } = image;\n      return `<li class=\"item\">\n        <a class=\"item-link\" href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\">\n          <div class=\"views\">\n            <div class=\"view-item\">\n              <div class=\"view-title\">Likes</div>\n              <div class=\"view-value\">${likes}</div>\n            </div>\n            <div class=\"view-item\">\n              <div class=\"view-title\">Views</div>\n              <div class=\"view-value\">${views}</div>\n            </div>\n            <div class=\"view-item\">\n              <div class=\"view-title\">Comments</div>\n              <div class=\"view-value\">${comments}</div>\n            </div>\n            <div class=\"view-item\">\n              <div class=\"view-title\">Downloads</div>\n              <div class=\"view-value\">${downloads}</div>\n            </div>\n          </div>\n        </a>\n      </li>`\n    })\n    .join('');\n}","import { getPixabayImages, PER_PAGE } from './js/pixabay-api';\nimport { generateImagesList } from './js/render-functions';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Params\nconst lightboxParams = {\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250\n};\n\n// Variables\nconst gallery = document.querySelector('#gallery');\nconst searchForm = document.querySelector('#search');\nconst loadMore = document.querySelector('#load_more');\nconst loadMoreLoader = document.querySelector('#load_more_loader');\nconst loader = document.querySelector('.site-loader');\nconst lightbox = new SimpleLightbox('.gallery a', lightboxParams);\n\nlet queryValue = '';\nlet queryPage = 1;\n\n// Function to show iziToast message\nfunction showMessage({ message, color }) {\n  iziToast.show({\n    message: message,\n    color: color,\n    position: 'topRight',\n    messageColor: '#ffffff',\n    image: './img/oct.svg',\n    imageWidth: 24\n  });\n}\n\n// Fetch and display images\nasync function fetchAndDisplayImages(reset = false) {\n  try {\n    const { total, hits } = await getPixabayImages(queryValue, queryPage);\n\n    if (reset) {\n      gallery.innerHTML = '';\n      loader.classList.remove('is-hidden');\n    }\n\n    if (total === 0) {\n      showMessage({ message: \"Sorry, there are no images matching your search query. Please try again!\", color: '#ef4040' });\n      return;\n    }\n\n    const totalPages = Math.ceil(total / PER_PAGE);\n\n    gallery.insertAdjacentHTML('beforeend', generateImagesList(hits));\n\n    if (reset) {\n      loader.classList.add('is-hidden');\n      if (totalPages > 1) {\n        loadMore.classList.remove('hidden');\n      }\n    }\n\n    if (queryPage >= totalPages || queryPage >= Math.ceil(500 / PER_PAGE)) {\n      loadMore.classList.add('hidden');\n      showMessage({ message: \"We're sorry, but you've reached the end of search results.\", color: '#4e75ff' });\n    }\n\n    lightbox.refresh();\n    if (!reset) {\n      smoothScrollByTwoCardHeights();\n    }\n  } catch (error) {\n    showMessage({ message: error.message, color: '#ef4040' });\n  } finally {\n    if (reset) {\n      searchForm.reset();\n    }\n    loadMoreLoader.classList.add('hidden');\n  }\n}\n\n// Smooth scroll by the height of two gallery cards\nfunction smoothScrollByTwoCardHeights() {\n  const galleryCards = document.querySelectorAll('.gallery .item');\n  if (galleryCards.length > 0) {\n    const cardHeight = galleryCards[0].getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth'\n    });\n  }\n}\n\n// Event handlers\nasync function onImageSearchSubmit(event) {\n  event.preventDefault();\n  queryValue = event.target.elements.image.value.trim();\n  queryPage = 1;\n  loadMore.classList.add('hidden');\n  await fetchAndDisplayImages(true);\n}\n\nasync function onLoadMoreResults(event) {\n  event.preventDefault();\n  queryPage += 1;\n  loadMoreLoader.classList.remove('hidden');\n  await fetchAndDisplayImages();\n}\n\n// Event listeners\nsearchForm.addEventListener('submit', onImageSearchSubmit);\nloadMore.addEventListener('click', onLoadMoreResults);\n"],"names":["PIXABAY_KEY","BASE_URL","PER_PAGE","getPixabayImages","query","page","params","axios","error","_a","generateImagesList","imagesList","image","webformatURL","largeImageURL","comments","downloads","likes","views","tags","lightboxParams","gallery","searchForm","loadMore","loadMoreLoader","loader","lightbox","SimpleLightbox","queryValue","queryPage","showMessage","message","color","iziToast","fetchAndDisplayImages","reset","total","hits","totalPages","smoothScrollByTwoCardHeights","galleryCards","cardHeight","onImageSearchSubmit","event","onLoadMoreResults"],"mappings":"owBAEA,MAAMA,EAAc,qCACdC,EAAW,2BACJC,EAAW,GAEXC,EAAmB,MAAOC,EAAQ,GAAIC,EAAO,IAAM,OAC9D,MAAMC,EAAS,CACb,IAAKN,EACL,EAAGI,EACH,SAAUF,EACV,KAAAG,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EAEE,GAAI,CAEF,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,QAAMC,EAAAD,EAAM,WAAN,YAAAC,EAAgB,aAAc,qBAAqB,CACpE,CACH,ECvBaC,EAAsBC,GAC1BA,EACJ,IAAKC,GAAU,CACd,KAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,SAAAC,EAAU,UAAAC,EAAW,MAAAC,EAAO,MAAAC,EAAO,KAAAC,CAAM,EAAGP,EACjF,MAAO;AAAA,qCACwBE,CAAa;AAAA,sBAC5BD,CAAY,UAAUM,CAAI;AAAA;AAAA;AAAA;AAAA,wCAIRF,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILH,CAAQ;AAAA;AAAA;AAAA;AAAA,wCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,YAKjD,CAAK,EACA,KAAK,EAAE,ECpBNI,EAAiB,CACrB,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,EAGMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAiB,SAAS,cAAc,mBAAmB,EAC3DC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAW,IAAIC,EAAe,aAAcP,CAAc,EAEhE,IAAIQ,EAAa,GACbC,EAAY,EAGhB,SAASC,EAAY,CAAE,QAAAC,EAAS,MAAAC,GAAS,CACvCC,EAAS,KAAK,CACZ,QAASF,EACT,MAAOC,EACP,SAAU,WACV,aAAc,UACd,MAAO,gBACP,WAAY,EAChB,CAAG,CACH,CAGA,eAAeE,EAAsBC,EAAQ,GAAO,CAClD,GAAI,CACF,KAAM,CAAE,MAAAC,EAAO,KAAAC,CAAM,EAAG,MAAMlC,EAAiByB,EAAYC,CAAS,EAOpE,GALIM,IACFd,EAAQ,UAAY,GACpBI,EAAO,UAAU,OAAO,WAAW,GAGjCW,IAAU,EAAG,CACfN,EAAY,CAAE,QAAS,2EAA4E,MAAO,SAAW,CAAA,EACrH,MACD,CAED,MAAMQ,EAAa,KAAK,KAAKF,EAAQlC,CAAQ,EAE7CmB,EAAQ,mBAAmB,YAAaX,EAAmB2B,CAAI,CAAC,EAE5DF,IACFV,EAAO,UAAU,IAAI,WAAW,EAC5Ba,EAAa,GACff,EAAS,UAAU,OAAO,QAAQ,IAIlCM,GAAaS,GAAcT,GAAa,KAAK,KAAK,IAAM3B,CAAQ,KAClEqB,EAAS,UAAU,IAAI,QAAQ,EAC/BO,EAAY,CAAE,QAAS,6DAA8D,MAAO,SAAW,CAAA,GAGzGJ,EAAS,QAAO,EACXS,GACHI,GAEH,OAAQ/B,EAAO,CACdsB,EAAY,CAAE,QAAStB,EAAM,QAAS,MAAO,SAAS,CAAE,CAC5D,QAAY,CACJ2B,GACFb,EAAW,MAAK,EAElBE,EAAe,UAAU,IAAI,QAAQ,CACtC,CACH,CAGA,SAASe,GAA+B,CACtC,MAAMC,EAAe,SAAS,iBAAiB,gBAAgB,EAC/D,GAAIA,EAAa,OAAS,EAAG,CAC3B,MAAMC,EAAaD,EAAa,CAAC,EAAE,sBAAqB,EAAG,OAC3D,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,KAAM,EACN,SAAU,QAChB,CAAK,CACF,CACH,CAGA,eAAeC,EAAoBC,EAAO,CACxCA,EAAM,eAAc,EACpBf,EAAae,EAAM,OAAO,SAAS,MAAM,MAAM,OAC/Cd,EAAY,EACZN,EAAS,UAAU,IAAI,QAAQ,EAC/B,MAAMW,EAAsB,EAAI,CAClC,CAEA,eAAeU,EAAkBD,EAAO,CACtCA,EAAM,eAAc,EACpBd,GAAa,EACbL,EAAe,UAAU,OAAO,QAAQ,EACxC,MAAMU,EAAqB,CAC7B,CAGAZ,EAAW,iBAAiB,SAAUoB,CAAmB,EACzDnB,EAAS,iBAAiB,QAASqB,CAAiB"}